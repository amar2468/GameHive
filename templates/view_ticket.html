{% extends 'base.html' %}
{% load static %}
{% block title %}View Ticket{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/view_ticket.js' %}"></script>
{% endblock %}

<body>
    {% block content %}

    <section id="main_section">
        <section class="d-flex container">
            <section class="mt-3 mb-5 ms-sm-0 ms-md-5" id="heading_for_viewing_ticket_page">
                <h2 class="mt-3 mb-5">{{ ticket_info.ticket_title }}</h2>
                <p class="mt-3 mb-5">{{ ticket_info.ticket_description }}</p>
                
                <hr>

                <section id="comments_section">
                    <h4>Comments</h4>
                </section>
            </section>

            <section class="mt-3 ms-sm-0 ms-md-5 mb-5">
                
                <button class="toggle_sidebar_btn mb-2 btn-primary btn-lg" type="button" id="toggle_sidebar" aria-label="Toggle sidebar"><i class="bi bi-list"></i></button>
                
                <div class="ticket_info d-none mt-2 col-md-9">
                    <dl class="row">
                        <dt class="ticket_attributes mt-2 ms-1 me-2 col-sm-5">Ticket ID</dt>
                        <dd class="ticket_attribute_values mt-2 ms-1 me-2 col-sm-7"><b>{{ ticket_info.ticket_id }}</b></dd>

                        <dt class="ticket_attributes mt-2 ms-1 me-2 col-sm-5">Requester</dt>
                        {% if ticket_info.requester_email == "" %}
                            <dd class="ticket_attribute_values mt-2 ms-1 me-2 col-sm-7"><b>{{ ticket_info.requester_username }}</b></dd>
                        {% else %}
                            <dd class="ticket_attribute_values mt-2 ms-1 me-2 col-sm-7"><b>{{ ticket_info.requester_email }}</b></dd>
                        {% endif %}

                        <dt class="ticket_attributes mt-2 ms-1 me-2 col-sm-5">Ticket Type</dt>
                        <dd class="ticket_attribute_values mt-2 ms-1 me-2 col-sm-7"><b>{{ ticket_info.ticket_request_type }}</b></dd>

                        <dt class="ticket_attributes mt-2 ms-1 me-2 col-sm-5">Ticket Status</dt>
                        <dd class="ticket_attribute_values mt-2 ms-1 me-2 col-sm-7"><b>{{ ticket_info.ticket_status }}</b></dd>

                        <dt class="ticket_attributes mt-2 ms-1 me-2 col-sm-5">Assigned To</dt>
                        {% if ticket_info.ticket_assigned_to == "" %}
                            <dd class="ticket_attribute_values mt-2 ms-1 me-2 col-sm-7"><b>Unassigned</b></dd>
                        {% else %}
                            <dd class="ticket_attribute_values mt-2 ms-1 me-2 col-sm-7"><b>{{ ticket_info.ticket_assigned_to }}</b></dd>
                        {% endif %}

                        <dt class="ticket_attributes mt-2 ms-1 me-2 col-sm-5">Created At</dt>
                        <dd class="ticket_attribute_values mt-2 ms-1 me-2 col-sm-7"><b>{{ ticket_info.ticket_created_at }}</b></dd>

                        <dt class="ticket_attributes mt-2 ms-1 me-2 col-sm-5">Updated At</dt>
                        <dd class="ticket_attribute_values mt-2 ms-1 me-2 col-sm-7"><b>{{ ticket_info.ticket_updated_at }}</b></dd>
                    </dl>
                </div>
            </section>
        </section>
    </section>
    {% endblock %}
</body>